# Redis Schema

| Key                                     | Type           | Description                                                                                                                                                                     |
| --------------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| users:{userId}                          | Hash Object    | <u>Fields:</u><code><li>&nbsp;String email;</li><li>&nbsp;String password (hashed);</li><li>&nbsp;String firstName;</li><li>&nbsp;String lastName;</li></code>                  |
| users:count                             | String         | This will be used as an user ID each time a new user is created, then it will be incremented.                                                                                   |
| users:emails:{email}                    | Hash Object    | Useful for looking up users by email in authentication.<br><br><u>Fields:</u><code><li>&nbsp;String id;</li><li>&nbsp;String password (hashed);</li></code>                     |
| users:{userId}:conversations            | Sorted Set     | Contains the IDs of all conversations a user belongs to, sorted by their newest message from oldest to most recent                                                              |
| admins:{adminId}                        | Hash Object    | <u>Fields:</u><code><li>&nbsp;String email;</li><li>&nbsp;String password (hashed);</li><li>&nbsp;String firstName;</li><li>&nbsp;String lastName;</li></code>                  |
| admins:count                            | String         | This will be used as an admin ID each time a new admin is created, then it will be incremented.                                                                                 |
| admins:emails:{email}                   | Hash Object    | Useful for looking up admins by email in authentication.<br><br><u>Fields:</u><code><li>&nbsp;String id;</li><li>&nbsp;String password (hashed);</li></code>                    |
| conversations:count                     | String         | This will be used as a conversation ID each time a new conversation is created, then it will be incremented.                                                                    |
| conversations:{conversationId}:messages | Sorted Set     | This will contain the IDs of all the messages from this conversation sorted from oldest to newest.                                                                              |
| conversations:{conversationId}:members  | Set            | This will contain the user IDs of all the users in the conversation.                                                                                                            |
| messages:{messageId}                    | Hash Object    | <u>Fields:</u><code><li>&nbsp;String conversation;</li><li>&nbsp;String sender;</li><li>&nbsp;String text;</li></code>                                                          |
| messages:count                          | String         | This will be used as a message ID each time a new message is created, then it will be incremented.                                                                              |
| gyms                                    | Geospatial Set | This will contain the IDs of all the gyms sorted by their geohash. This allows efficient geospatial queries.                                                                    |
| gyms:{gymId}                            | Hash Object    | <u>Fields:</u><code><li>&nbsp;String name;</li><li>&nbsp;String streetAddress;</li><li>&nbsp;String city;</li><li>&nbsp;String state;</li><li>&nbsp;String zipCode;</li></code> |
| gyms:count                              | String         | This will be used as a gym ID each time a new gym is created, then it will be incremented.                                                                                      |
