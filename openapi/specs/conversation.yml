tags:
  - name: Conversation
    description: Conversation database endpoint

paths:
  # /conversation/recents
  recents:
    get:
      tags:
        - Conversation
      summary: Get all of my recent conversations by most recent message
      security:
        - AccessToken: []
      responses:
        200:
          description: Got my conversations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ConversationAndMessage"
        500:
          description: An internal error occurred

components:
  schemas:
    Message:
      title: Message
      required:
        - _id
        - userCognitoId
        - text
        - createdAt
      type: object
      properties:
        _id:
          type: string
          example: 6361c05b30d64fe62ff485cb
        userCognitoId:
          type: string
          example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
        text:
          type: string
          example: Hello
        createdAt:
          type: string
          example: 2020-04-01T00:00:00.000Z
    UserPublic:
      title: public user
      required:
        - _id
        - cognitoId
        - gymId
        - firstName
        - lastName
      type: object
      properties:
        _id:
          type: string
          example: 6361c05b30d64fe62ff485cb
        cognitoId:
          type: string
          example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
        gymId:
          type: string
          example: 6361c05b30d64fe62ff485cb
        firstName:
          type: string
          example: Jp
        lastName:
          type: string
          example: Siegel
    Conversation:
      title: Conversation
      required:
        - _id
        - users
      type: object
      properties:
        _id:
          type: string
          example: 6361c05b30d64fe62ff485cb
        users:
          type: array
          items:
            $ref: "#/components/schemas/UserPublic"
    ConversationAndMessage:
      title: Conversation and Message
      required:
        - conversation
        - message
      type: object
      properties:
        message:
          $ref: "#/components/schemas/Message"
        conversation:
          $ref: "#/components/schemas/Conversation"
