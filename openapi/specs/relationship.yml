tags:
  - name: User Relationship
    description: User relationship database endpoint

paths:
  # /relationship/sendFriendRequest
  sendFriendRequest:
    post:
      tags:
        - User Relationship
      summary: Send/Accept a friend request
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - recipientId
              properties:
                recipientId:
                  type: string
                  example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
      responses:
        200:
          description: The friend request was sent/accepted
        400:
          description: Validation error
        500:
          description: An internal error occurred

  # /relationship/denyFriendRequest
  denyFriendRequest:
    post:
      tags:
        - User Relationship
      summary: Deny a friend request
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - recipientId
              properties:
                recipientId:
                  type: string
                  example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
      responses:
        200:
          description: The friend request was denied
        400:
          description: Validation error
        500:
          description: An internal error occurred

  # /relationship/block
  block:
    post:
      tags:
        - User Relationship
      summary: Block a user
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - recipientId
              properties:
                recipientId:
                  type: string
                  example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
      responses:
        200:
          description: The user was blocked
        400:
          description: Validation error
        500:
          description: An internal error occurred

  # /relationship/unblock
  unblock:
    post:
      tags:
        - User Relationship
      summary: Unblock a user
      security:
        - AccessToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - recipientId
              properties:
                recipientId:
                  type: string
                  example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
      responses:
        200:
          description: The user was blocked
        400:
          description: Validation error
        500:
          description: An internal error occurred

  # /relationship/sentFriendRequests
  sentFriendRequests:
    get:
      tags:
        - User Relationship
      summary: Get all of my pending sent friend requests
      security:
        - AccessToken: []
      responses:
        200:
          description: Got my pending requests
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserPublic"
        400:
          description: Validation error
        500:
          description: An internal error occurred

  # /relationship/receivedFriendRequests
  receivedFriendRequests:
    get:
      tags:
        - User Relationship
      summary: Get all of my received friend requests
      security:
        - AccessToken: []
      responses:
        200:
          description: Got my pending requests
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserPublic"
        400:
          description: Validation error
        500:
          description: An internal error occurred

  # /relationship/friends
  friends:
    get:
      tags:
        - User Relationship
      summary: Get all of my friends public data
      security:
        - AccessToken: []
      responses:
        200:
          description: Got my friends data
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Friend"
        400:
          description: Validation error
        500:
          description: An internal error occurred

components:
  schemas:
    UserPublic:
      title: public user
      required:
        - _id
        - cognitoId
        - gymId
        - firstName
        - lastName
      type: object
      properties:
        _id:
          type: string
          example: 6361c05b30d64fe62ff485cb
        cognitoId:
          type: string
          example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
        gymId:
          type: string
          example: 6361c05b30d64fe62ff485cb
        firstName:
          type: string
          example: Jp
        lastName:
          type: string
          example: Siegel
    Friend:
      title: friend
      required:
        - _id
        - cognitoId
        - gymId
        - firstName
        - lastName
        - since
      type: object
      properties:
        _id:
          type: string
          example: 6361c05b30d64fe62ff485cb
        cognitoId:
          type: string
          example: fgd9s033n-f42fdnskfrlkg-fdg431ffgf-f4wsdf4yh
        gymId:
          type: string
          example: 6361c05b30d64fe62ff485cb
        firstName:
          type: string
          example: Jp
        lastName:
          type: string
          example: Siegel
        since:
          type: string
          example: 2020-01-01T00:00:00.000Z
